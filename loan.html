<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>üìÑ –ö—Ä–µ–¥–∏—Ç–∏</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>üìÑ –ö—Ä–µ–¥–∏—Ç–∏</h1>
    <nav>
      <a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
      <a href="accounts.html">–†–∞—Ö—É–Ω–∫–∏</a>
      <a href="cards.html">–ö–∞—Ä—Ç–∫–∏</a>
      <a href="payment.html">–ü–ª–∞—Ç–µ–∂—ñ</a>
      <a href="loan.html">–ö—Ä–µ–¥–∏—Ç–∏</a>
      <a href="templates.html">–®–∞–±–ª–æ–Ω–∏</a>
      <a href="settings.html">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</a>
      <a href="login.html">–í–∏—Ö—ñ–¥</a>
    </nav>
  </header>

  <main class="fade-in">
    <h2>üßæ –ú–æ—ó –∫—Ä–µ–¥–∏—Ç–∏</h2>
    <table class="account-table">
      <thead>
        <tr>
          <th>–°—É–º–∞</th>
          <th>–¢–µ—Ä–º—ñ–Ω (–º—ñ—Å.)</th>
          <th>–°—Ç–∞–≤–∫–∞</th>
          <th>–î–æ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è</th>
          <th>–î–∞—Ç–∞</th>
        </tr>
      </thead>
      <tbody id="loanList"></tbody>
    </table>

    <h3>‚ûï –û—Ñ–æ—Ä–º–∏—Ç–∏ –Ω–æ–≤–∏–π –∫—Ä–µ–¥–∏—Ç</h3>
    <form id="loanForm">
      <label>–°—É–º–∞:
        <input type="number" id="loanAmount" required>
      </label>
      <label>–¢–µ—Ä–º—ñ–Ω (–º—ñ—Å.):
        <input type="number" id="loanTerm" required>
      </label>
      <button type="submit" class="action-btn">–û—Ñ–æ—Ä–º–∏—Ç–∏</button>
    </form>
  </main>

  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const table = document.getElementById("loanList");
      const loans = JSON.parse(localStorage.getItem("loans") || "[]");
      loans.forEach(function (l) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${l.amount} –≥—Ä–Ω</td><td>${l.term}</td><td>35%</td><td>${l.total} –≥—Ä–Ω</td><td>${l.date}</td>`;
        table.appendChild(tr);
      });

      const form = document.getElementById("loanForm");
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const amount = parseFloat(document.getElementById("loanAmount").value);
        const term = parseInt(document.getElementById("loanTerm").value);
        const total = (amount + amount * 0.35).toFixed(2);
        const date = new Date().toLocaleDateString("uk-UA");

        loans.push({ amount, term, total, date });
        localStorage.setItem("loans", JSON.stringify(loans));

        // –ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫
        const accounts = JSON.parse(localStorage.getItem("accounts") || "[]");
        if (accounts.length > 0) {
          accounts[0].balance += amount;
          localStorage.setItem("accounts", JSON.stringify(accounts));
        }

        location.reload();
      });
    });
  </script>
</body>
</html>
